<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introdução | Panamah SDK</title>
    <meta name="description" content=" ">
    <link rel="shortcut icon" href="/assets/img/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.703d6cb3.css" as="style"><link rel="preload" href="/assets/js/app.ecee90df.js" as="script"><link rel="preload" href="/assets/js/5.9b834864.js" as="script"><link rel="prefetch" href="/assets/js/2.854dcf62.js"><link rel="prefetch" href="/assets/js/3.a5bda422.js"><link rel="prefetch" href="/assets/js/4.e52bcd78.js"><link rel="prefetch" href="/assets/js/6.dd56869c.js"><link rel="prefetch" href="/assets/js/7.52ff7d5f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.703d6cb3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo-qd.png" alt="Panamah SDK" class="logo"> <span class="site-name can-hide">Panamah SDK</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Início</a></div><div class="nav-item"><a href="/OVERVIEW.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Visão geral</a></div><div class="nav-item"><a href="/GUIDE.html" class="nav-link">Exemplos de uso</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Início</a></div><div class="nav-item"><a href="/OVERVIEW.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Visão geral</a></div><div class="nav-item"><a href="/GUIDE.html" class="nav-link">Exemplos de uso</a></div> <!----></nav>  <!----> </div> <div class="page"> <div class="content"><h2 id="introducao"><a href="#introducao" class="header-anchor">#</a> Introdução</h2> <p>O PanamahSDK é dividido em três partes: <code>PanamahStream</code>, <code>PanamahAdmin</code> e os modelos de dados prefixados com Panamah, e. g.: <code>PanamahLoja</code> ou <code>PanamahProduto</code>.</p> <ul><li><p><code>PanamahStream</code>: API de manipulação dos dados. Permite o envio ou remoção de dados através dos métodos <code>save()</code> e <code>delete()</code>, também disponibilizando a leitura de documentos fiscais através dos métodos <code>readNFe()</code> e <code>readNFeDirectory()</code>. A leitura de documentos fiscais os transforma em modelos de dados, permitindo que o software apenas complemente propriedades que não são enviadas para SEFAZ, como por exemplo, o id da seção de um produto. Além disso, o Stream possui hooks que são úteis tanto na validação quanto na adição de informações.</p></li> <li><p><code>PanamahAdmin</code>: API de gerenciamento administrativo. Permite a criação e leitura de assinantes.</p></li> <li><p>Modelos de dados: Os modelos de dados são utilizados pelas APIs para executar ações no servidor. Eles são a implementação da estrutura dos dados no Panamah, porém são validados localmente antes de serem salvos ou deletados, permitindo agilidade e evitando requisições desnecessárias.</p></li></ul> <p><img src="assets/img/panamah-sdk-simple-flow.png" alt="sdk simple workflow"></p> <blockquote><p><strong>Assinantes</strong> são os clientes que adquirem o software da empresa parceira.
<strong>Empresas parceiras</strong> consomem os serviços do Panamah.</p></blockquote> <h2 id="credenciais-e-tokens"><a href="#credenciais-e-tokens" class="header-anchor">#</a> Credenciais e tokens</h2> <p>Todos os parceiros recebem um par de tokens de autenticação chamados <code>AuthorizationToken</code> e <code>Secret</code>, que são usados para autorizar o uso das APIs do SDK. Esses tokens devem ser mantidos de forma segura, sob o risco de uso indevido por terceiros.</p> <h2 id="execucao-continua-do-panamahstream"><a href="#execucao-continua-do-panamahstream" class="header-anchor">#</a> Execução contínua do PanamahStream</h2> <p>O fluxo de envio dos dados pelo <code>PanamahStream</code> se dá de forma contínua após a sua inicialização pelo método <code>init()</code> que recebe os tokens de autenticação e o id do assinante. Esse fluxo é executado assincronamente por thread ou agendamento de execução por intervalo no caso do javascript. Operações de salvamento ou deleção são escritas no disco em lotes que tem limite de tempo (5 minutos) e tamanho (5 KB). Quando atingido qualquer limite, uma requisição contendo as operações é disparada para o servidor. Devido a natureza assíncrona do fluxo de envios, é essencial que o método <code>flush()</code> seja chamado no fim da execução da aplicação, evitando que dados que foram salvos no lote corrente e ainda não atingiram um limite, sejam enviados apenas na próxima execução da aplicação.</p> <h2 id="hooks-e-eventos"><a href="#hooks-e-eventos" class="header-anchor">#</a> Hooks e eventos</h2> <p>Eventos são disparados antes de salvar ou deletar modelos e quando erros no processamento assíncrono acontecem. Esses eventos servem para facilitar a validação e complemento de dados, bem como tratar situações inesperadas:</p> <ul><li><a href="https://github.com/quickdata-team/panamah-sdk-delphi/wiki/Vis%C3%A3o-geral#Hooks-e-eventos" target="_blank" rel="noopener noreferrer">Delphi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/quickdata-team/panamah-sdk-javascript/wiki/Vis%C3%A3o-geral#Hooks-e-eventos" target="_blank" rel="noopener noreferrer">Javascript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/quickdata-team/panamah-sdk-python/wiki/Vis%C3%A3o-geral#Hooks-e-eventos" target="_blank" rel="noopener noreferrer">Python<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="tratando-recursos-pendentes"><a href="#tratando-recursos-pendentes" class="header-anchor">#</a> Tratando recursos pendentes</h2> <p>O <code>PanamahStream</code> dispõe do método de <code>getPendingResources()</code> que retorna uma lista de modelos cujos dados completos não foram enviados para o Panamah, porém foram referenciados por modelos enviados anteriormente. Por exemplo: um produto Coca-Cola (id: 111) pertence a seção Bebidas (id: 999). Este produto foi salvo utilizando o modelo <code>PanamahProduto</code> com a devida propriedade secaoId preenchida com 999, por motivo indeterminado, o serviço do parceiro não enviou a seção Bebidas (999) usando o modelo <code>PanamahSecao</code>. Executando o método <code>getPendingResources()</code>, uma lista contendo apenas um modelo <code>PanamahSecao</code> seria retornada com somente a propriedade id preenchida com 999. Caberia ao software do parceiro percorrer a lista, preencher o restante dos dados e salvar os modelos com o <code>PanamahStream</code>.</p> <h2 id="passo-a-passo"><a href="#passo-a-passo" class="header-anchor">#</a> Passo a passo</h2> <ol><li><p>Obter os tokens de autenticação: AuthorizationToken e Secret.</p></li> <li><p>Fazer a instalação da biblioteca específica da linguagem da sua aplicação</p> <ul><li><a href="https://github.com/quickdata-team/panamah-sdk-delphi" target="_blank" rel="noopener noreferrer">Delphi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/quickdata-team/panamah-sdk-java" target="_blank" rel="noopener noreferrer">Java<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/quickdata-team/panamah-sdk-javascript" target="_blank" rel="noopener noreferrer">Javascript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/quickdata-team/panamah-sdk-python" target="_blank" rel="noopener noreferrer">Python<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><p>No bootstrap da aplicação, chamar a função <code>init()</code> das APIs PanamahAdmin e PanamahStream</p> <blockquote><p><strong>Atenção:</strong> O id do assinante deve ser um valor único, sendo recomendável o uso do CNPJ do assinante, assim como um controle externo para que o envio de dados não seja realizado em ambiente de homologação, por exemplo através da checagem de diretivas de compilação ou chave de uso.</p></blockquote> <blockquote><p>É possível criar um assinante usando o modelo PanamahAssinante com o método <code>createAssinante()</code> da API PanamahAdmin.</p></blockquote></li> <li><p>Utilizar as funções <code>save()</code> e <code>delete()</code> da API PanamahStream com os modelos de dados para enviar ou remover informações do Panamah.</p></li> <li><p>Na finalização da aplicação, chamar a função <code>flush()</code> para garantir o envio de dados pendentes</p></li></ol> <h2 id="diagrama-uml"><a href="#diagrama-uml" class="header-anchor">#</a> Diagrama UML</h2> <p><img src="assets/img/panamah-sdk-uml.jpg" alt="panamah-sdk-uml"></p> <h2 id="mais-informacoes"><a href="#mais-informacoes" class="header-anchor">#</a> Mais informações</h2> <ul><li><a href="/GUIDE.html">Exemplos de uso</a></li> <li><a href="/#Plataformas">Repositórios das bibliotecas</a></li> <li><a href="https://github.com/quickdata-team/panamah-sdk-delphi/wiki" target="_blank" rel="noopener noreferrer">Wiki PanamahSDK Delphi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/quickdata-team/panamah-sdk-java/wiki" target="_blank" rel="noopener noreferrer">Wiki PanamahSDK Java<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/quickdata-team/panamah-sdk-javascript/wiki" target="_blank" rel="noopener noreferrer">Wiki PanamahSDK Javascript<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/quickdata-team/panamah-sdk-python/wiki" target="_blank" rel="noopener noreferrer">Wiki PanamahSDK Python<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/19/2021, 3:02:52 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.ecee90df.js" defer></script><script src="/assets/js/5.9b834864.js" defer></script>
  </body>
</html>
